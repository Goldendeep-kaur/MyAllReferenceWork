package presentation;

import java.util.List;
import java.util.Scanner;

import exception.EmptyCatelogException;
import exception.SystemException;
import model.AdminPojo;
import service.AdminService;
import service.AdminServiceImpl;

public class AdminMain {

	public static void main(String[] args) {
		Scanner scan = new Scanner(System.in);
		AdminService adminService= new AdminServiceImpl();
		char proceed='y';
		while(proceed=='y') {
			System.out.println("************************************");
			System.out.println("");
			System.out.println("Library Management System");
			System.out.println("");
			System.out.println("************************************");
			System.out.println("1. View All Books.");
			System.out.println("2. Add New Book To The System.");
			System.out.println("3. Update a Book Details.");
			System.out.println("4. Delete a Book From System");
			System.out.println("5. Exit");
			System.out.println("************************************");
			System.out.println("Please Choose an Option:  ");
			int option= scan.nextInt();
			System.out.println("************************************");
			switch(option) {
			case 1:
				List<AdminPojo> everyBook;
				try {
					everyBook= adminService.getAllBooks();
					
				} catch (EmptyCatelogException e) {
						System.out.println(e.getMessage());
						break;
				} catch (SystemException e) {
						System.out.println(e.getMessage());
						break;
				}
				
				System.out.println("************************************");
				System.out.println("Book Id\t Book ISBN\t Book Name\t Book Publisher");
				System.out.println("************************************");
				everyBook.forEach((item)-> System.out.println(item.getBookId()+"\t"+item.getBookIsbn()+"\t"+item.getBookName()+"\t"+item.getBookPublisher()));
				System.out.println("************************************");
				System.out.println("Do you want to continue?(y/n)");
				proceed= scan.next().charAt(0);
				break;
				
			case 2:
				AdminPojo newAdminPojo= new AdminPojo();
				System.out.println("Please enter new Book ISBN(numeric only):");
				scan.nextLine();
				newAdminPojo.setBookIsbn(scan.nextInt());
				System.out.println("Please enter new Book Name:");
				newAdminPojo.setBookName(scan.nextLine());
				System.out.println("Please enter Publisher Name of new Book:");
				newAdminPojo.setBookPublisher(scan.nextLine());
				
				AdminPojo adminPojo=null;
				try {
					
					adminPojo= adminService.addBook(newAdminPojo);				
				}catch (SystemException e){
					System.out.println(e.getMessage());
					break;
				}
				System.out.println("**************************");
				System.out.println("New Book added successfully !\n Book Id id :"+ adminPojo.getBookId());
				System.out.println("***************************");
				
				break;
				
			case 3:
				System.out.println("Please enter Book Id to be Removed from Catelog :");
				int bookId= scan.nextInt();
				AdminPojo getAdminPojo=null;
				try {
					getAdminPojo= adminPojo.getABook(bookId);
				}catch (SystemException e1){
					System.out.println(e1.getMessage());
					break;
				}
			}
			
		}
				
	}
}
